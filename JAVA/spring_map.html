<!DOCTYPE html>
<html>
   <meta charset="UTF-8">
   <title>Spring map <!-- ignore --></title>
<head>
<script src="../map_v1.js"></script>
<link rel="stylesheet" type="text/css" href="../map_v1.css" />
</head>

<body>
<div groupv>
<pre zoom>
<span xsmall>External Links</span>
@[https://docs.spring.io/spring/docs/5.0.0.RELEASE/spring-framework-reference/]
@[https://docs.spring.io/spring/docs/5.0.0.RELEASE/spring-framework-reference/overview.html#spring-introduction']
@[https://github.com/spring-projects/spring-framework/wiki/What%27s-New-in-the-Spring-Framework]
</pre>

<pre zoom>
<span xsmall>Summary</span>




ºBASE PACKAGES of Spring IoC:º
  org.springframework.context                                         org.springframework.beans
˂˂org.springframework.context.BeanFactory˃˃
↑ - provides advanced config.mechanism for "any" type of object.
│  
│
˂˂org.springframework.context.ºApplicationContextº˃˃
↑- extends BeanFactory with "Enterprise Features"
│  - represents the IoC container 
│  - easier integration with Spring's AOP features
│  - message resource handling (for use in i18n)
│  - event publication
│  - application-layer specific contexts such as 
│    - WebApplicationContext
│  ─ implemented by 
├─── ClassPathXmlApplicationContext
│    ºApplicationContextº context = 
│         new ClassPathXmlApplicationContext ( // Alt 1:
│          "services.xml", "daos.xml");
│          ^^^^^^^^^^^^^^^^^^^^^^^^^^
├─── FileSystemApplicationContext
├─── ...

  MyBeanClass myBean = contextº
         .getBeanº("idBeanDef", beanClass.class);
          ^^^^^^^^ 
          Everything will be "transparent"
 
Spring 1.0+   Spring 2.5+          Spring 3.0+
- XML         Annotation-based     Java-based config

ºBeansº @[https://docs.spring.io/spring/docs/5.0.0.RELEASE/spring-framework-reference/core.html#beans-definition]

º ____                                     _            _       _        º
º| __ )  ___  __ _ _ __     _ __ ___   ___| |_ __ _  __| | __ _| |_ __ _ º
º|  _ \ / _ \/ _` | '_ \   | '_ ` _ \ / _ \ __/ _` |/ _` |/ _` | __/ _` |º
º| |_) |  __/ (_| | | | \  | | | | | |  __/ || (_| | (_| | (_| | || (_| |º
º|____/ \___|\__,_|_| |_|  |_| |_| |_|\___|\__\__,_|\__,_|\__,_|\__\__,_|º
                                                                           
  package-qualified class name 
-ºname º: (unique) "id" or (aliased) "name" in xml.
-ºscopeº: -ºsingletonº per Spring IoC container (default)
          -ºprototypeº single bean definition to any number of object instances.
          - Within the context of a web-aware Spring ApplicationContext:
            -ºrequest    º: single bean for lifecycle of HTTP request
            -ºsession    º: single bean for lifecycle of HTTP Session. 
            -ºapplicationº: Single bean for lifecycle of ServletContext. 
            -ºwebsocketº  : single bean for lifecycle of WebSocket.
  
-ºconstructor argsº: (Prefered to properties -setters-):
     ˂bean id="id01" class="x.y.Class01"/˃
     ˂bean id="id02" class="x.y.Class02"/˃
     
     ˂bean id="instance03" class="x.y.Class03"˃
       ˂constructor-arg ref="id01"/˃                   ← By class
       ˂constructor-arg type="int" value="3320"/˃      ← by type
       ˂constructor-arg name="year" value="2020"/˃     ← by param name
       ˂constructor-arg index="4" value="Hello World"/˃← by param index

     ˂/bean˃
       Note:- Bº˂idref˃ is prefered to property with value attribute (fails-faster)º
            - bean ºdepends-onº attribute can force initialization (and destruction) order

- relationship           Let Spring resolve collaborators (other beans)
 ºautowiring modeº       for given bean by inspecting the contents of the
  between                ApplicationContext.
@[https://docs.spring.io/spring/docs/5.0.0.RELEASE/spring-framework-reference/core.html#beans-factory-autowire]
               Referencing bean autowire values:
               no              | byName               |  byType (setter)             |
                               |                      |  constructor(arg)            |
               ^^              | ^^^^^^               |  ^^^^^^                      |
               ref used        | Containers looks for |  autowired if exactly        |
               not recommended | a bean with the same |  one bean of the property    |
               for complex     | name as the property |  type exists in container.   |
               configs         |                      |  (throw if ˃1 found)         |
                               |                      |Rº(set to null if zero found)º|
                         
        Referenced bean autowire-candidate values:
           true 
           false (Disable bean as autowire candidate)
        
        
        Note ˂beans˃ "default-autowire-candidates" can limit autowire candidate globally.
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                      csv list of candidates:
                      *Repository,*Security,*Logging

-ºlazy-initº   false: Will force to resolve and instantiate at startup.(default,recomended)
               true : use for "big objects" to save memory. 
               
-ºdestroy-methodº


<span xsmall>nullability</span>
º@NonNullº       ← forces param|return value|field to be NON-null
º@Nullableº      ← allows param|return value|field to be     null
º@NonNullApiº    ← forces param|return value       to be NON-null at package level
º@NonNullFieldsº ← forces                    field to be NON-null at package level
  ^^^^^^^^^^^^^
  org.springframework.lang. package


ºNull and empty string valuesº
- empty arguments for properties,... convert to "" empty String.
- ˂null/˃ element handles null values. Ex
  ˂property name="email"˃
    ˂null/˃
  ˂/property˃


ºRegistrering external (to the container) objectsº (not recomended)
BeanFactory bFactImpl = context.getBeanFactory()
                                ^^^^^^^^^^^^^^
                               returns DefaultListableBeanFactory impl
bFactImpl.registerSingleton(..)
bFactImpl.registerBeanDefinition(..)


<span xsmall>Quick Sheet</span>
REF:                                                     
@[https://www.javagists.com/spring-boot-cheatsheet]  ← TODO: Testing annotations,
@[https://groupe-sii.github.io/cheat-sheets/spring/spring-boot/index.html]

  ºSPRING FRAMEWORK ANNOTATIONSº                                            │  ºSPRING FRAMEWORK ANNOTATIONSº                                       
  ANNOTATION      DESCRIPTION                                  LEVEL        │  ANNOTATION      DESCRIPTION                                  LEVEL   
                |                                            |C|F|C|M|P     │                |                                            |C|F|C|M|P
                |                                            |L|I|O|E|A     │                |                                            |L|I|O|E|A
                |                                            |A|E|N|T|R     │                |                                            |A|E|N|T|R
                |                                            |S|L|S|H|A     │                |                                            |S|L|S|H|A
                |                                            |S|D|T|O|M     │                |                                            |S|D|T|O|M
                |                                            | | |R|D|S     │                |                                            | | |R|D|S
                |                                            | | |U| |      │                |                                            | | |U| |
                |                                            | | |C| |      │                |                                            | | |C| |
                ------------------------------------------------------      │                ------------------------------------------------------
 º@Autowired    º| "autowired by type", used to inject object |  x x x      │ º@SpringBootApplicationº                                    |         
k                | dependency implicitly .                    |             │                |tag for main class for S Boot project.      |
                 | - No need to be public.                    |             │                |tagged class must be present in base path,  |
                 ------------------------------------------------------     │                | triggering the scan for sub-packages       |
 º@Configurable º|inject properties of domain objects.        |x            │                ------------------------------------------------------
                 |Types whose properties are injected without |             │ º@EnableAutoConfigurationº                                  |
                 |being instantiated by Spring                |             │                ------------------------------------------------------
                 ------------------------------------------------------     │ º@Controllerº  |Allows detection of component classes in    |
 º@Qualifier    º| used to create more than one bean of the   |  x x x      │                |the class path automatically and register   |
                 | same type and wire only one of the types   |             │                |bean definitions for the classes            |
                 | with a property, providing greater control |             │                |automatically.                              |
                 | on the dependency injection process.       |             │                ------------------------------------------------------
                 | - can be used with @Autowired annotation.  |             │ º@RestControllerº                                           |
                 ------------------------------------------------------     │                |tag controller as RESTful (behaviour) that  |
 º@Required     º|mark mandatory class members.               |  x x x      │                |will behave as resources.                   |
                 ------------------------------------------------------     │                ------------------------------------------------------
 º@ComponentScanº|Trigger scanning of package for the         |x            │ º@ResponseBodyº|automatically convert returned object to a  |
                 |@Configuration clases.                      |             │                |response body.                              |
                 ------------------------------------------------------     │                ------------------------------------------------------
 º@Configurationº|ºused on classes that define beans.º        |x            │ º@RequestMappingº                                           |
                 ------------------------------------------------------     │                |map requests URI to handler class/method    |
 º@Bean         º|tag a method ºbean producerº which will be  |      x      │                ------------------------------------------------------
                 |mananged by the Spring container.           |             │ º@RequestParamº|bind req.param to method param in controller|
                 ------------------------------------------------------     │                ------------------------------------------------------
 º@Lazy         º| Init bean/component on demand              |x     x      │ º@PathVariableº|bind placeholder from URI to method.param   |
                 ------------------------------------------------------
 º@Value        º|used to inject values into a bean's         |  x x x  
                 |attribute from a property file, indicating  |
                 |a default value expression.                 |
                 ------------------------------------------------------
 º@Import       º|                                            |
                 ------------------------------------------------------
 º@DependsOn    º|                                            |
                 ------------------------------------------------------


<span xsmall>"Cloudify"</span>
@[http://files.zeroturnaround.com/pdf/zt_spring_annotations_cheat_sheet.pdf]
         ┌────────→ @SpringBootApplication                HTTP Request                                 ºCLOUDº
 provides│
    beans│           ┌─────────────────┐
         │           │    like these   │           ┌──────────────────────────────┐ ask config       ┌───────────────┐
        ┌────────────┴────┐            v           │ @RestController              ┌─────────────────→  Configuration │
        │@Configuration   │        ┌────────┐      │                              │ config.propert.  │    Server     │
        │                 │        │@Service│      │                              │←──────────────── └───────────────┘
        │                 │        └──────┬─┘      │   @Autowired                 │
        │ @Bean           │               └──┬───────→ Service service;           │register itself as service
        │ public MyBean   │        ┌─────────┴┐    │                              ├──────────────────→──────────┐
        │ providerBean()  │        │@Component│    │                              │ask for service   │  Service │
        │                 │        └──────────┘    │   @RequestMapping            ├─────────────────→  Discovery│
        └─────────────────┘                        │   public Map serverRequest() │←──────────────── └──────────┘
                                                   │                              │ URL response
                                                   └──────────────────────────────┘                      

º@EnableConfigServerº  turns app into a server that other apps can get their configuration from.
                       Use spring.application.cloud.config.uri in the client @SpringBootApplication 
                       to point to the config server.
 
º@EnableEurekaServerº  turns your app into an Eureka discovery service
 
º@EnableDiscoveryClientº  makes your app register in the service discovery server and discover other services through it.
 
º@EnableCircuitBreakerº- configures Hystrix circuit breaker protocols.
 
º@HystrixCommand(fallbackMethod = “fallbackMethodName”)º
  marks methods to fall back to another method if they cannot succeed normally.

<span xsmall>Example XML configuration</span>
xml config inport:

NOTE:  Other namespaces appart of beans are also                                          | ºExample Collection Configurationº
       provided such as "context" and "util"                                              | (˂list/˃, ˂set/˃, ˂map/˃, ˂props/˃)
       for extra config. options                                                          | 
                                                                                          | ˂bean id="moreComplexObject" class="example.ComplexObject"˃
˂?xml version="1.0" encoding="UTF-8"?˃                                                    |   ˂property name="adminEmails"˃ ←ºwill call setAdminEmails(Properties ...)º
˂beans xmlns="http://www...schema/beans"                                                  |     ˂props˃
  ˂xmlns:xsi= "http://www.w3.org/2001/XMLSchema-instance"                                 |       ˂prop key="administrator"˃administrator@example.org˂/prop˃
  ˂xsi:schemaLocation="http://.../schema/beans                                            |       ˂prop key="support"      ˃support@example.org˂/prop˃
     http://..../schema/beans/spring-beans.xsd"˃                                          |       ...
                                                                                          |     ˂/props˃
 ˂!-- *including (importing) other xml --˃                                                |   ˂/property˃
 ˂import resource="/resources/messaging.xml"/˃                                            |   ˂property name="someList"˃   ←ºwill call setSomeList(List ...) º
 ˂import resource="/resources/persistence.xml"/˃                                          |     ˂list˃
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^                                             |       ˂ref bean="myDataSource0" /˃
                   relative to current xml.                                               |       ˂ref bean="myDataSource1" /˃
                     → "/resources/..." is 'down' current xml path                        |       ...
 ˂import resource="custom.xml"/˃                                                          |     ˂/list˃
 ˂import resource="file:/config/custom.xml"/˃                                             |   ˂/property˃
                   ^^^^^^^^^^^^^^^^^^^^^^^^                                               |   ˂property name="someMap"˃    ←ºwill call setSomeMap(Map ...) º
                   Absolute system dependent file (discouraged)                           |     ˂map˃
 ˂import resource="classpath:/config/otherResources.xml"/˃                                | ┌──→  ˂entry key="key1"  value    ="just some string"/˃
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                   | │     ˂entry key="a ref" value-ref="myDataSource"/˃
                   Absolute classpath (discouraged)                                       | │   ˂/map˃
 ˂import resource="file:${JVM_RUNTIME_ENV_VAR}/....xml"/˃                                 | │ ˂/property˃
                        ^^^^^^^^^^^^^^^^^^^^^^                                            | │ ˂property name="someSet"˃    ←ºwill call setSomeSet(Map ...) º
                        Use JVM ENV.VARs (ºDevOps friendlyº)                              | │   ˂set˃
                                                                                          | ├──→  ˂value˃string 01˂/value˃
                                                                                          | │     ˂value˃string 02˂/value˃
                                                                                          | │     ...
                                                                                          | │     ˂ref bean="myDataSource" /˃
  ˂bean Bºidº="idFactoryInst" class="..."˃˂/bean˃ ˂-- Using factory --˃                   | │   ˂/set˃
               ^^^^^^^^^^^^^                                                              | │ ˂/property˃
               convention:                                                                | │ ^^^^^^^^^^^^^^^^^^^^^^^^ 
               initial lower-case + camelCase                                             | └─The value of a map key or value, or a set value,
              (With auto-scanned beans, spring will                                       |   bean | ref | idref | list | set | map | props | value | null
               take the className and convert                                             | ˂/bean˃
               first letter to lower-case.                                                | 
               - java.beans.Introspector.decapitalize -)                                  | ºCollection mergingº
                                                                                          | - The Spring container also supports merging of collections.
  ˂--ºUsing Constructorº--˃                                                               | - In parent-child like relationships for 
  ˂bean Bºidº="idBeanDefinition1"                                                         |   ˂list/˃, ˂map/˃, ˂set/˃ or ˂props/˃
          class="my.full.qualified.ClassName1"                                            | Ex:
          depends-on="beanId1,beanId2,..."                                                |    ˂beans˃
          ^^^^^^^^^^                                                                      |      ˂bean id="parentBean" 
        - Sometimes dependencies between beans are in-direct and 'ref' to                 |        Bºabstract="true"º class="example.ComplexObject"˃
          another bean is not enough. For example an static initializer in                |        ˂property name="adminEmails"˃
          a class needs to be triggered. In this case                                     |          ˂props˃
          'depends-on' will explicitly force dependent-on beans to be                     |            ˂prop key="administrator"˃administrator@example.com˂/prop˃
          initialized in order.                                                           |            ˂prop key="support"˃support@example.com˂/prop˃
        - In the case of singleton beans only, it can also                                |          ˂/props˃
          indicate a destroy time dependency (shutdown order)                             |        ˂/property˃
                                                                                          |      ˂/bean˃
                                                                                          |      ˂bean id="child" Bºparent="parentBean"º˃
                                                                                          |        ˂property name="adminEmails"˃
                                                                                          |          ˂!-- the merge is specified on the child collection definition --˃
   º˂constructor-arGºgºrefº="bar"/˃                                                       | ┌─────→  ˂props Bºmerge="true"º˃
   º˂constructor-arGºgºrefº="baz"/˃                                                       | │          ˂prop key="sales"˃sales@example.com˂/prop˃
   º˂constructor-argº  type="int" index="0" value="23" /˃                                 | │          ˂prop key="support"˃support@example.co.uk˂/prop˃
   º˂constructor-argº  type="int" index="1" value="10" /˃                                 | │        ˂/props˃
                                  ^^^^^^^^^                                               | │      ˂/property˃
                        The index resolves the ambiguity a constructor                    | │    ˂/bean˃
                        with two arguments of the same type.                              | │  ˂beans˃
                        Name can also be used to disambiguate like :                      | │  
                        ˂constructor-arg name="years" value="23"/˃                        | └─ adminEmails Properties will contain result of the merging of the child's
                        ˂constructor-arg name="ultimateAnswer" value="10"/˃               |    adminEmails collection with the parent's adminEmails collection.
  ˂/bean˃                                                                                 |  
                                                                                          |   In the list case the ºorder criteriumº is that
  USING SETTERS:                                                                          |   of parent's values preceding all of the child list's values.
  - discouraged in favour of constructor based , since favour "safer" code.
  - Can be useful if there are circular dependencies between two
    beans at initialization time.

  ˂bean Bºidº="idBeanDefinition2" name="alias1;alias2" class="my.full.qualified.ClassName2"˃
                                  ^^^^^^^^^^^^^^^^^^^^
                                  allows for alias to the id
                                  Most probably alias are used in
                                  multi-module projects like:
                          ˂alias name="dataSource"            alias="subsystemA-dataSource"/˃
                          ˂alias name="subsystemB-dataSource" alias="subsystemB-dataSource"/˃
    ˂constructor-arg Gºrefº="bar"/˃
    ˂constructor-arg Gºrefº="baz"/˃

    ˂!-- TODO 
        Bean behavioral configuration elements, stating how bean should behave 
        (scope, lifecycle callbacks, ...).
    --˃

    STATIC FACTORY METHOD
    ˂property name="myInnerBean"˃ 
      ˂bean Bºidº="idMyBuildBean" 
            class="my.full.qualified.Factory" 
       ºfactory-methodº="createInstance"/˃
       ^^^^^^^^^^^^^^^^
    ˂/property˃

    USING INSTANCE BºFACTORY METHODº FOR GºANOTHER BEANº
    (No class is specified in this case, resolved from type 
     returned by ºBºgactory-method*)
    ˂bean          id="clientService"                      
       Gºfactory-bean="serviceLocator"º
       B*factory-method="createClientServiceInstance"*/˃
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    The serviceLocatos Class would be similar to
    public class DefaultServiceLocator {
      public ClientService BºcreateClientServiceInstance()º { ... }
             ^^^^^^^^^^^^^
             built bean class type
      public AccountService  createAccountServiceInstance() { ... }
    }

    ˂-- non-static factory method --˃
    ˂property name="myInnerBean2"˃
      ˂bean factory-bean="idFactoryInst" factory-method="createInstance"˃
        ˂constructor-arg Gºrefº="factoryArg1Ref"/˃
      ˂/bean˃

      ˂!-- java.util.Properties --˃
      ˂property name="myConfProps"˃
        ˂value˃
          prop1=val1
          prop2=val2
        ˂/value˃
      ˂/property˃
    ˂/property˃

    ˂!-- Spring Expresion Language --˃
    ˂property name="randomNumber" value="#{ T(java.lang.Math).random() }" /˃

    ˂-- non static factory method --˃
    ˂property name="accountDao" Gºrefº="idAccountDaoBeanDef"/˃
    ˂property name="itemDao" Gºrefº="idItemDaoBeanDef"/˃
  ˂/bean˃
  ˂alias name="DataSource" alias="subsystemA-DS"/˃
  ...
˂/beans˃
</pre>


</div>


<div groupv>
<span title>Reactive WebFlux</span>  
<pre zoom>
<span xsmall>Reactive</span>
<span xsmall>Stack</span>
<span xsmall>(Spring 5.0+)</span>
<span xsmall>Reactive Web</span>
@[https://docs.spring.io/spring/docs/5.0.0.RELEASE/spring-framework-reference/web-reactive.html#webflux]
- Note: Servlet 3.1+ API for non-blocking I/O leads away from
  the rest of the Servlet API where contracts are synchronous 
  (Filter, Servlet) or blocking (getParameter, getPart).
- fully non-blocking, handling concurrency with a small number of threads
- supports Reactive Streams non-blocking back pressure:
  In synch/imperative code, blocking calls serve as a natural form
  of back pressure that forces the caller to wait.
  In non-blocking code it becomes important to control the rate 
   of events so that a fast producer does not overwhelm its destination.
  Spring Reactive Streams is a small spec, also adopted in Java 9,
  that defines the interaction between asynchronous components 
  with back pressure. Ex: a data repository (Publisher),
  produces data that an HTTP server (Subscriber), can then "forward"
  to the response. Main purpose of Reactive Streams is to allow
  the subscriber to control how fast or how slow the publisher
  will produce data.
  If a publisher can’t slow down then it has to decide whether
  to buffer, drop, or fail.
- As a general rule WebFlux APIs accept a plain Publisher as input,
  adapt it to Reactor types internally, use those, and then return
  either Flux or Mono as output.
- runs on Netty, Undertow, Servlet 3.1+ containers
- TODO: WebClient
- TODO: WebTestClient
- TODO: WebSocket
- The spring-web module contains the reactive building block:  
  HTTP abstractions, Reactive Streams server adapters, reactive codecs, 
  and a core Web API.
- public spring-web APIs Server support is organized in two layers:
  - HttpHandler and server adapters : the most basic, common API for HTTP 
    request handling with Reactive Streams back pressure running on different 
    servers.
  - WebHandler API : slightly higher level but still general purpose server 
    web API with exception handlers (WebExceptionHandler), filters (WebFilter), 
    and a target handler (WebHandler)
    All components work on ServerWebExchange — a container for the HTTP 
    request and response that also adds request attributes, session attributes, 
    access to form data, multipart data, and more.
- Codecs: The spring-web module provides 
  HttpMessageReader(DecoderHttpMessageReader) and 
  HttpMessageWriter(EncoderHttpMessageWriter) for encoding and decoding the
  HTTP request and response body with Reactive Streams.
  Basic Encoder and Decoder implementations exist in spring-core but 
  spring-web adds more for JSON, XML, and other formats.

<span xsmall>DispatcherHandler</span>
- central controller
- discovers delegate components from Spring configuration
  If declared with the bean name "webHandler" it is in turn
  discovered by WebHttpHandlerBuilder which puts together a 
  request processing chain as described in WebHandler API
- typical WebFlux application Spring configuration:
  - DispatcherHandler named "webHandler"
  - WebFilters
  - WebExceptionHandlers
  - DispatcherHandler special beans
  - Others
- The configuration is given to WebHttpHandlerBuilder to 
  build the processing chain:
 (The resulting HttpHandler is ready for use with a server adapter)
  ApplicationContext context = ...
  HttpHandler handler = WebHttpHandlerBuilder.
      applicationContext(context);
- "special beans":  Spring-managed instances implementing one of the contracts listed:

  Bean type            | Explanation
  ---------------------+------------------------------------
  HandlerMapping       | Map a request to a handler.
                       | mapping is based on some criteria
                       | the details of which vary by 
                       | HandlerMapping implementation 
                       | (annotated controllers, 
                       | simple URL pattern mappings,...)
  ---------------------+------------------------------------
  HandlerAdapter       | Helps the DispatcherHandler to
                       | invoke a handler mapped to a 
                       | request regardless of how the
                       | handler is actually invoked. 
                       | For example invoking an annotated
                       | controller requires resolving
                       | various annotations. The main
                       | purpose of a HandlerAdapter
                       | is to shield the DispatcherHandler
                       | from such details.
  ---------------------+------------------------------------
  HandlerResultHandler | Process the HandlerResult returned
                       | from a HandlerAdapter

- request flow:
  for map in HandlerMapping_list:
    //  (continue is map doesn't match request)
    handler = first handler in map matching request
    HandlerResult res = handler()
    HandlerResultHandler(res)

  Rules  
  1) Each HandlerMapping is asked to find a
     matching handler and the first match is used
  2) If a handler is found, it is executed through
     an appropriate HandlerAdapter which exposes 
     the return value from the execution as
     HandlerResult.
  3) The HandlerResult is given to an appropriate
     HandlerResultHandler to complete processing 
     by writing to the response directly or using
     a view to render.

<span xsmall>Processing Chain</span>
- The processing chain can be put together with WebHttpHandlerBuilder which builds an
HttpHandler that in turn can be run with a server adapter.
To use the builder either add components individually or point to an ApplicationContext
to have the following detected:<p>

 ┌──────────────────────────────────────────────────────────────────────────────────────────
 │Bean name             │Bean type            │Count│ Description
 ├──────────────────────┼─────────────────────┼─────┼───────────────────────────────────────
 │webHandler            │WebHandler           │1    │ Target handler after filters
 ├──────────────────────┼─────────────────────┼─────┼───────────────────────────────────────
 │"any"                 │WebFilter            │0..N │ Filters
 ├──────────────────────┼─────────────────────┼─────┼───────────────────────────────────────
 │"any"                 │WebExceptionHandler  │0..N │ Exception handlers after filter chain
 ├──────────────────────┼─────────────────────┼─────┼───────────────────────────────────────
 │webSessionManager     │WebSessionManager    │0..1 │ Custom session manager
 │                      │                     │     │ DefaultWebSessionManager by default
 ├──────────────────────┼─────────────────────┼─────┼───────────────────────────────────────
 │serverCodecConfigurer │ServerCodecConfigurer│0..1 │ Custom form and multipart data decoders
 │                      │                     │     │ ServerCodecConfigurer.create() by default
 ├──────────────────────┼─────────────────────┼─────┼───────────────────────────────────────
 │localeContextResolver │LocaleContextResolver│0..1 │ Custom resolver for LocaleContext;
 │                      │                     │     │ AcceptHeaderLocaleContextResolver by default
 └──────────────────────┴─────────────────────┴─────┴───────────────────────────────────────

<span xsmall>Required dependencies</span>
Server name     │  Group id              │ Artifact name      │  Code snippet
────────────────┼────────────────────────┼────────────────────┼────────────────
Reactor Netty   │ io.projectreactor.ipc  │ reactor-netty      │ HttpHandler handler = ...
                │                        │                    │ ReactorHttpHandlerAdapter adapter = 
                │                        │                    │     new ReactorHttpHandlerAdapter(handler);
                │                        │                    │ HttpServer.create(host, port).
                │                        │                    │     newHandler(adapter).block();
────────────────┼────────────────────────┼────────────────────┼────────────────
Undertow        │ io.undertow            │ undertow-core      │ HttpHandler handler = ...
                │                        │                    │ UndertowHttpHandlerAdapter adapter =
                │                        │                    │      new UndertowHttpHandlerAdapter(handler);
                │                        │                    │ Undertow server = Undertow.builder().
                │                        │                    │      addHttpListener(port, host).
                │                        │                    │      setHandler(adapter).build();
                │                        │                    │ server.start();
────────────────┼────────────────────────┼────────────────────┼────────────────
Tomcat          │ org.apache.tomcat.embe │ omcat-embed-core   │ HttpHandler handler = ...
                │                        │                    │ Servlet servlet = new 
                │                        │                    │     TomcatHttpHandlerAdapter(handler);
                │                        │                    │ 
                │                        │                    │ Tomcat server = new Tomcat();
                │                        │                    │ File base = new File(
                │                        │                    │    System.getProperty("java.io.tmpdir"));
                │                        │                    │ Context rootContext = server.
                │                        │                    │    addContext("", base.getAbsolutePath());
                │                        │                    │ Tomcat.addServlet(rootContext, "main", servlet);
                │                        │                    │ rootContext.addServletMappingDecoded("/", "main");
                │                        │                    │ server.setHost(host);
                │                        │                    │ server.setPort(port);
                │                        │                    │ server.start();
────────────────┼────────────────────────┼────────────────────┼────────────────
Jetty           │ org.eclipse.jetty      │ etty-server        │ HttpHandler handler = ...
                │                        │ etty-servlet       │ Servlet servlet = 
                │                        │                    │     new JettyHttpHandlerAdapter(handler);
                │                        │                    │ 
                │                        │                    │ Server server = new Server();
                │                        │                    │ ServletContextHandler contextHandler =
                │                        │                    │     new ServletContextHandler(server, "");
                │                        │                    │ contextHandler.addServlet(
                │                        │                    │     new ServletHolder(servlet), "/");
                │                        │                    │ contextHandler.start();
                │                        │                    │ 
                │                        │                    │ ServerConnector connector =
                │                        │                    │     new ServerConnector(server);
                │                        │                    │ connector.setHost(host);
                │                        │                    │ connector.setPort(port);
                │                        │                    │ server.addConnector(connector);
                │                        │                    │ server.start();
────────────────┴────────────────────────┴────────────────────┴────────────────

</pre>
</div>
</div>

<div groupv>
<span title>Annotated Controllers</span>
 
<pre zoom TODO>
<span xsmall>Security</span>
</pre>   
<pre TODO zoom>
<span xsmall>DATA-ACCESS</span>
@[https://docs.spring.io/spring/docs/5.0.0.RELEASE/spring-framework-reference/data-access.html]
</pre>

<pre TODO zoom>
<span xsmall>TESTING</span>
@[https://docs.spring.io/spring/docs/5.0.0.RELEASE/spring-framework-reference/testing.html]
</pre>

<pre TODO zoom>
<span xsmall>INTEGRATION</span>
@[https://docs.spring.io/spring/docs/5.0.0.RELEASE/spring-framework-reference/integration.html]
</pre>


<pre TODO zoom>
<span xsmall>GraalVM integration</span>
<span xsmall>Spring</span>
<span xsmall>Issues</span>
UUID: 6374869e-4921-497d-9d43-75fb6ae1c9c9
REF:
@[https://github.com/spring-projects/spring-framework/wiki/GraalVM-native-image-support]
Working toward GraalVM native image support without requiring additional 
configuration or workaround is one of the themes of upcoming Spring Framework 
5.3. The main missing piece for considering GraalVM as a suitable deployment 
target for Spring applications is providing custom GraalVM Feature 
implementation at Spring Framework level to automatically register classes 
used in the dependency mechanism or Spring factories, see the related issue #
22968 for more details.
</pre>


</div>

</body>
</html>
<!--
  //@[https://docs.spring.io/spring/docs/5.0.0.RELEASE/spring-framework-reference/core.html#resources]

<pre zoom>
<span xsmall>Method injection</span>
- Suppose singleton A needs to use ºnon-singletonº bean B
 ºon each method invocation on Aº

Solution A:
RºDiscouraged, tied to Spring internalsº
- beans A implements ˂˂ApplicationContextAware˃˃.
  getBean("B") to container requesting a 
  (typically new) bean B instance.

Solution B: Method Injection
- containers overrides managed bean A
  Limitations: 
  - class and method cannot be final
  - lookup methods won't work with factory methods 
    and in particular not with @Bean methods
    in configuration
     classes, since the container is not in charge of creating the instance
     in that case and therefore cannot create a runtime-generated subclass 
     on the fly.
</pre>
_________________________
TODO: scan config auto-detection
___________________________
<pre TODO zoom>
<span xsmall>MVC</span>
@[https://docs.spring.io/spring/docs/5.0.0.RELEASE/spring-framework-reference/web.html#mvc]
</pre>
___________________________
<pre TODO zoom>
<span xsmall>Spring vs Guice</span>
@[https://www.baeldung.com/guice-spring-dependency-injection]
</pre>



--˃
